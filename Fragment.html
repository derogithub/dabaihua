<html><head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<div class="editor-area" id="noteContent" style="padding : 20px 0px 10px 12px"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Android Activity生命周期以及Fragment生命周期的区别与分析:&nbsp;<a href="http://www.cnblogs.com/zzw1994/p/4985434.html" style="line-height: 1.5;" target="_blank">http://www.cnblogs.com/zzw1994/p/4985434.html</a></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">官方文档: <a href="http://developer.android.com/guide/components/fragments.html" target="_blank">http://developer.android.com/guide/components/fragments.html</a></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">5.2.1 Fragment实例精讲——底部导航栏的实现(方法1):&nbsp;<a href="http://www.runoob.com/w3cnote/android-tutorial-fragment-demo1.html" style="line-height: 1.5;" target="_blank">http://www.runoob.com/w3cnote/android-tutorial-fragment-demo1.html</a></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">其实就是把一个页面,拆分成多个模块.显示这个页面的时候,就把一个个模块放进来.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">拆分出来的模块就叫做Fragment.页面就是Activity.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment和Activity没多少区别,把Fragment当作可以嵌入到Activity中的Activity.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">需要考虑的点</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment的代码怎么写</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Activity怎么管理fragment</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">添加一个Fragment</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><strike>修改Fragment</strike>&nbsp;<span style="line-height: 1.5;">替换fragment</span></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">删除Fragment</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment和Activity之间怎么交换数据</blockquote>看了相关的教程后,发现fragment还能做这些事:</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">fragment切换的时候加动画效果</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">activity可以利用一个没有UI的fragment,进行后台操作</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">点击"返回键",也可以返回到刚才的fragment</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在activity中获取fragment的两种方法</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote>对应的代码</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment的代码怎么写:</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">java代码</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">public class MyFragment extends &nbsp;Fragment {</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">//activity有的生命周期,它都有</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">//fragment自己的生命周期有</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">public void onAttach(Context context) {<span style="line-height: 1.5;">} //当fragment被放进Activity的时候</span></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">public void onDetach() {} //当fragmeng被Activity移除的时候</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">public View onCreateView(LayoutInflater inflater, ViewGroup container,
<span style="line-height: 1.5;">&nbsp;Bundle savedInstanceState) {} //创建View并返回</span></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">}</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Activity怎么管理fragment</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">先写一行代码,获取管理fragment的对象:</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">FragmentManager fragmentManager = getFragmentManager();</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">然后就可以操作fragment了,操作代码要有"开始"和"提交"</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">FragmentTransaction transaction = getFragmentManager().beginTransaction();</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">//添加/删除/替换</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">//指定动画</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">//需要的话,添加到back栈</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">transaction.commit();</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Activity怎么添加一个Fragment</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">有两种方法,第一种在activity的xml中直接写;第二种在activity的xml中写一个FrameLayout,在activity的java代码中创建一个fragment,放到FramenLayout里.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">第一种</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在activity的xml中直接写:&nbsp;</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&lt;fragment android:name="com.example.news.ArticleListFragment"
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android:id="@+id/list"
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android:layout_weight="1"
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android:layout_width="0dp"
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android:layout_height="match_parent" /&gt;</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">第二种</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在activity的xml中写一个FrameLayout</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&lt;FrameLayout android:id="@+id/<span style="background-color: rgb(255, 255, 255);">fragment_container</span>" android:layout_weight="1"
</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android:layout_width="0px" android:layout_height="match_parent"
</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android:background="?android:attr/detailsElementBackground" /&gt;</blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在activity的java代码中创建一个fragment,放到FramenLayout里.</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="line-height: 1.5;">FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();</span></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">ExampleFragment fragment = new ExampleFragment();
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">fragmentTransaction.add(R.id.fragment_container, fragment);
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">fragmentTransaction.commit();</blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Activity怎么替换Fragment</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment newFragment = new ExampleFragment();
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">FragmentTransaction transaction = getFragmentManager().beginTransaction();
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">
<span style="line-height: 1.5;">transaction.replace(R.id.fragment_container, newFragment);</span></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">transaction.commit();</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Activity怎么删除Fragment</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">FragmentTransaction transaction = getFragmentManager().beginTransaction();
</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="background-color: rgb(255, 255, 255);">Fragment fragment = fragmentManager</span><span style="line-height: 1.5;">.findFragmentById(R.id.details);</span></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><span style="background-color: rgb(255, 255, 255);">transaction.remove(fragment);</span></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">transaction.commit();</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment和Activity之间怎么交换数据</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在fragment里,用<b>getActivity()</b>获得activity的对象</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在activity里,用<b>findFragmentById()</b>或<b>findFragmentByTag()</b>获取fragment对象.</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">fragment切换的时候加动画效果</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在替换fragment的时候,可以加一行代码来设置过渡动画</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">Fragment newFragment = new ExampleFragment();
</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">FragmentTransaction transaction = getFragmentManager().beginTransaction();
</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">
transaction.replace(R.id.fragment_container, newFragment);
</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><b><span style="background-color: rgb(255, 255, 255);">transaction.</span><span style="background-color: rgb(255, 255, 255); line-height: 1.5;">setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);</span></b></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">transaction.commit();</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">上面是加系统提供的动画,下面这行代码,是加自定义的动画:</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><b style="background-color: rgb(255, 255, 255);"><span style="background-color:rgb(255, 255, 255);">transaction.setCustomAnimations(R.animator.slide_in_left, R.animator.slide_out_right);</span></b></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">俩参数都是动画xml资源,第一个参数是新加的fragment的动画,第二个是被替换的fragment的动画.</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">activity可以利用一个没有UI的fragment,进行后台操作</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">官方例子:&nbsp;<a href="https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.java" target="_blank">https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.java</a></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">这么做是应为,只要把fragment设置为"保存实例"的状态,当activity因某些原因重新启动(如:配置更改),fragment的实例会保存下来.就能在fragment中保存一些状态.比Activity.onRetainNonConfiguratinInstance()好用.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">什么时候会用到呢?</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">为啥用fragment保存实例: http://stackoverflow.com/questions/11160412/why-use-fragmentsetretaininstanceboolean</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">定期和UI交互的后台任务</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">因配置改变而导致的activity重新启动.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">比如:横竖屏切换;</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">比如:横竖屏切换的时候,在fragment里保持蓝牙socket通信;</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">比如:需要长时间的加载的bitmaps或者从服务器加载的数据,保存在这里,下次再打开的时候就不用重新加载了</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">我们需要考虑的有:</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">怎么设置为"保存实例"的状态</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">fragment.setRetainInstance(true);</blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">怎么添加到activity中</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">因为这个fragment不会添加到View里面,所以添加的时候设置一个tag,方便以后找到它.</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">fragmentTransaction.add(<span style="background-color: rgb(255, 255, 255);">fragment</span>, "myFragmentTag");</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">找它的时候用:</blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">DetailsFragment details = (DetailsFragment)
</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; getFragmentManager().findFragmentByTag("<span style="background-color: rgb(255, 255, 255);">myFragmentTag</span><span style="line-height: 1.5;">");</span></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">通常把tag名称写成一个final String</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote></blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">点击"返回键",也可以返回到刚才的fragment</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在commit之前写一行代码:</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">transaction.addToBackStack(null);</blockquote>这样,被替换的fragment或者被remove的fragment不会被销毁,会变成stopped状态</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">在activity中获取fragment的两种方法</blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">上面已经提到了,用FragmentManager对象的以下两个方法:</blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">findFragmentById()</blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;">findFragmentByTag()</blockquote></blockquote></blockquote></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><br></blockquote></div>

<div style="clear: both; display: block;"></div></body></html>
